<?php

namespace Database\Seeders;

use App\Models\Package;
use App\Models\PackageQuestion;
use Carbon\Carbon;
use Illuminate\Database\Seeder;

class PackagesSeeder extends Seeder
{
    public function run(): void
    {
//        Package::truncate();
//        PackageQuestion::truncate();

        $items = [
            [
                'name' => 'تحلیل شخصیت استروپینکی',
                'slug' => 'تحلیل-شخصیت-استروپینکی',
                'description' => 'تحلیل ۱۳ بخشی بر پایه عدد تولد، روان‌شناسی ژرف و مسیر هویت',
                'meta_title' => 'تحلیل شخصیت استروپینکی | شناخت هویت واقعی بر اساس عدد تولد',
                'meta_description' => 'تحلیل شخصیت استروپینکی یک گزارش ۱۳ بخشی شخصی‌سازی‌شده است بر پایه عدد تولد، روان‌شناسی ژرف و انرژی پنهان. مناسب برای شناخت مسیر هویت و بیداری درونی.',
                'price' => 346000,
                'special_price' => 190000,
                'prompt1' => '«تو نقش یک تحلیل‌گر استروپینکی هستی؛ جایی که استرولوژی، عددشناسی، روان‌شناسی ژرف و کلد ریدینگ در هم تنیده می‌شوند تا تحلیلی شخصی، انسانی و شهودی از روح و روان هر فرد بسازی.',
                'prompt2' => '✨ تحلیل باید در ۱۳ بخش زیر نوشته شود:
1) چهرهٔ ظاهری شخصیت
2) انرژی عدد تولد و پیام پنهان روح
3) خودِ دفن‌شده یا فراموش‌شده
4) مرحله فعلی رشد روانی
5) عزت نفس درونی
6) اعتماد به نفس
7) انرژی سرکوب‌شدهٔ شخصیتی
8) نقش‌های ناسازگار و خودِ دروغین
9) مسیر معنوی و رسالت روح
10) نیروی فراموش‌شده یا دزدیده‌شده
11) صدای درونی خاموش‌شده
12) کارت تاروت هویت و مسیر درونی
13) پیام نهایی برای بیداری هویت',
                'published_at' => Carbon::now(),
                'questions' => [
                    [
                        'content' => 'نام کامل',
                        'type' => 'text',
                        'is_required' => true,
                    ],
                    [
                        'content' => 'تاریخ تولد (شمسی، دقیق)',
                        'type' => 'date',
                        'is_required' => true,
                    ],
                    [
                        'content' => 'جنسیت',
                        'type' => 'select',
                        'is_required' => true,
                        'options' => [
                            'مذکر',
                            'مونث',
                            'دیگر',
                        ]
                    ],
                    [
                        'content' => 'وضعیت رابطه‌ای',
                        'type' => 'select',
                        'is_required' => true,
                        'options' => [
                            'مجرد',
                            'متأهل',
                            'در رابطه',
                            'جداشده'
                        ]
                    ],
                ],
            ],
            [
                'name' => 'تحلیل نیمه‌گمشده و عشق',
                'slug' => 'تحلیل-عشق-استروپینکی',
                'description' => 'تحلیل ۱۰ بخشی شخصی‌سازی‌شده از عشق، زخم‌های رابطه‌ای و نیمه‌گمشده',
                'meta_title' => 'تحلیل عشق استروپینکی | نیمه‌گمشده، زخم‌ها و مسیر احساسی تو',
                'meta_description' => 'تحلیلی عمیق و چندلایه از عشق و روابط، بر پایه عدد تولد، انرژی عاطفی و روان‌شناسی درونی. مناسب برای کشف الگوهای عشقی و نیمه‌گمشده.',
                'price' => 346000,
                'special_price' => 190000,
                'prompt1' => '«تو نقش یک تحلیل‌گر استروپینکی هستی؛ جایی که استرولوژی، عددشناسی، روان‌شناسی ژرف و کلد ریدینگ در هم تنیده می‌شوند تا تحلیلی شخصی، انسانی و شهودی از مسیر عشق و نیمه‌گمشده‌ی هر فرد بسازی.',
                'prompt2' => '✨ تحلیل را در ۱۰ بخش زیر بنویس:
1) زخم عشق پنهان
2) الگوی تکراری رابطه
3) ترس اصلی در عشق
4) نیاز پنهان احساسی
5) تحلیل سکس‌انرژی
6) تحلیل روابط قبلی / سبک جدایی‌ها
7) تحلیل زوجی و انرژی عاطفی مشترک
8) قدرت احساسی سرکوب‌شده
9) انرژی عدد تولد در عشق
10) جمله طلایی برای قلبش',
                'published_at' => Carbon::now(),
                'questions' => [
                    [
                        'content' => 'نام کامل فرد',
                        'type' => 'text',
                        'is_required' => true,
                    ],
                    [
                        'content' => 'تاریخ تولد فرد (شمسی)',
                        'type' => 'date',
                        'is_required' => true,
                    ],
                    [
                        'content' => 'جنسیت فرد',
                        'type' => 'select',
                        'is_required' => true,
                        'options' =>
                            [
                                'مذکر',
                                'مونث',
                                'دیگر',
                            ]
                    ],
                    [
                        'content' => 'نام کامل پارتنر (در صورت وجود)',
                        'type' => 'text',
                        'is_required' => false,
                    ],
                    [
                        'content' => 'تاریخ تولد پارتنر (در صورت وجود)',
                        'type' => 'date',
                        'is_required' => false,
                    ],
                    [
                        'content' => 'جنسیت پارتنر (در صورت وجود)',
                        'type' => 'select',
                        'is_required' => false,
                        'options' =>
                            [
                                'مذکر',
                                'مونث',
                                'دیگر',
                            ]
                    ],
                    [
                        'content' => 'مدت زمان رابطه (در صورت وجود)',
                        'type' => 'text',
                        'is_required' => false,
                    ],
                ],
            ],
            [
                'name' => 'تحلیل مسیر مالی و شغلی',
                'slug' => 'تحلیل-مالی-استروپینکی',
                'description' => 'تحلیل ۱۲ بخشی از گره‌های پولی، رسالت شغلی و سایه‌های مالی',
                'meta_title' => 'تحلیل مسیر مالی و شغلی استروپینکی | درآمد، رسالت و فرصت‌ها',
                'meta_description' => 'تحلیل کامل از روان‌پول‌شناسی، انرژی پول، استعداد درآمدزایی و مسیر شغلی بر پایه عدد تولد و روان‌شناسی ژرف. مناسب برای عبور از گره‌های مالی و رشد درآمد.',
                'price' => 346000,
                'special_price' => 190000,
                'prompt1' => '«تو نقش یک تحلیل‌گر استروپینکی هستی؛ جایی که استرولوژی، عددشناسی، روان‌شناسی ژرف و کلد ریدینگ در هم تنیده می‌شوند تا تحلیلی شخصی، انسانی و شهودی از مسیر مالی و شغلی هر فرد بسازی.',
                'prompt2' => '✨ تحلیل باید در ۱۲ بخش زیر نوشته شود:
1) گره‌های مالی پنهان
2) استعداد طبیعی برای کسب پول
3) الگوی تکراری در شکست‌های مالی
4) رسالت شغلی
5) رابطه او با پول
6) انرژی عدد تولد در مسیر شغلی–مالی
7) فرصت‌های طلایی پیش‌رو
8) پیام از آینده مالی
9) سایه‌های مالی
10) قدرت فراموش‌شده برای پیشرفت
11) کارت تاروت مسیر پول
12) پیام نهایی روح در مسیر پول',
                'published_at' => Carbon::now(),
                'questions' => [
                    [
                        'content' => 'نام کامل',
                        'type' => 'text',
                        'is_required' => true,
                    ],
                    [
                        'content' => 'تاریخ تولد (شمسی، دقیق)',
                        'type' => 'date',
                        'is_required' => true,
                    ],
                    [
                        'content' => 'جنسیت',
                        'type' => 'select',
                        'is_required' => true,
                        'options' => [
                            'مذکر',
                            'مونث',
                            'دیگر',
                        ]
                    ],
                    [
                        'content' => 'وضعیت رابطه‌ای',
                        'type' => 'select',
                        'is_required' => false,
                        'options' => [
                            'مجرد',
                            'متأهل',
                            'در رابطه',
                            'جداشده',
                            'نامشخص',
                        ]
                    ],
                ],
            ],
            [
                'name' => 'تحلیل سایه‌ها و روان پنهان',
                'slug' => 'تحلیل-سایه-روان-استروپینکی',
                'description' => 'تحلیل ۱۳ بخشی از آرکی‌تایپ‌ها، آنیما/آنیموس و سایه‌های روان',
                'meta_title' => 'تحلیل روان پنهان استروپینکی | سایه‌ها، کهن‌الگو و سفر درونی',
                'meta_description' => 'تحلیل کامل و شهودی از روان پنهان، سایه‌ها، نقاب‌ها و آرکی‌تایپ‌ها. ترکیبی از روان‌شناسی ژرف و عددشناسی برای بیداری درونی و شناخت خود واقعی.',
                'price' => 346000,
                'special_price' => 190000,
                'prompt1' => '«تو نقش یک تحلیل‌گر استروپینکی هستی؛ جایی که استرولوژی، عددشناسی، روان‌شناسی ژرف و کلد ریدینگ در هم تنیده می‌شوند تا تحلیلی شخصی، انسانی و شهودی از سایه‌ها، آرکی‌تایپ‌ها و روان پنهان هر فرد بسازی.',
                'prompt2' => '✨ تحلیل باید در ۱۳ بخش زیر نوشته شود:
1) نقشه روان
2) سایه فعال
3) نقاب‌های شخصیتی
4) مرحله سفر قهرمانی
5) آرکی‌تایپ غالب
6) آرکی‌تایپ سرکوب‌شده
7) آنیما/آنیموس
8) زخم روانی پنهان
9) قدرت ناپیدا
10) چرخه تکراری روانی
11) تیپ شخصیتی MBTI
12) کارت تاروت روانی
13) پیام نهایی روانی',
                'published_at' => Carbon::now(),
                'questions' => [
                    [
                        'content' => 'نام کامل',
                        'type' => 'text',
                        'is_required' => true,
                    ],
                    [
                        'content' => 'تاریخ تولد (شمسی، دقیق)',
                        'type' => 'date',
                        'is_required' => true,
                    ],
                    [
                        'content' => 'جنسیت',
                        'type' => 'select',
                        'is_required' => true,
                        'options' => [
                            'مذکر',
                            'مونث',
                            'دیگر',
                        ]
                    ],
                    [
                        'content' => 'وضعیت رابطه‌ای',
                        'type' => 'select',
                        'is_required' => false,
                        'options' => [
                            'مجرد',
                            'متأهل',
                            'در رابطه',
                            'جداشده',
                            'نامشخص'
                        ]
                    ],
                ],
            ],
            [
                'name' => 'تحلیل اولیه رایگان',
                'slug' => 'تحلیل-اولیه-رایگان',
                'description' => '',
                'meta_title' => 'تحلیل اولیه رایگان شخصیت | نگاه شهودی به انرژی و روح تو',
                'meta_description' => 'تحلیلی رایگان و انسانی در ۷ بخش بر پایه عدد تولد، انرژی درونی و روان‌شناسی روحی. مناسب برای شروع مسیر خودشناسی با رویکرد شهودی و روایی.',
                'prompt1' => 'تو یک تحلیل گر شخصیت و روح معنوی هستی که به سبک ترکیبی از روان شناسی ژرف، عددشناسی، تاروت شهودی و تحلیل انرژی تولد، گزارش های شخصی سازی شده می نویسی.
الان می خوام برای یک فرد خاص، یک متن 7 بخشی حرفه ای، انسانی، تأثیرگذار و شهودی بنویسی.
هر بخش باید بین 80 تا 120 کلمه باشد، پر از جزئیات واقعی، لحن روان، و ترکیب جذاب بین روایت و شهود.',
                'prompt2' => 'تحلیل را در 7 بخش زیر بنویس، با همین ترتیب و همین تیترها:
1) انرژی عددی روح: (براساس تاریخ تولد، انرژی اعداد تولد، ترکیب عدد تولد و روان شناسی انرژی شناسی – تفسیر کامل با جزئیات شخصیتی)
2) زخم پنهان: (با الهام از سن، عددها، انرژی زنانه یا مردانه و نوع روح، بنویس که زخم اصلی شخصیت چیست، ریشه اش کجاست، چطور نشان می دهد)
3) قدرت ناپیدا: (توانایی یا حس شهودی ای که فرد دارد ولی باورش ندارد یا هنوز کامل کشفش نکرده)
4) پیام چرخهٔ زندگی: (در این بازهٔ سنی چه فصلی از رشد روانی/روحی طی می شود؟ چه چیزی می میرد و چه چیزی متولد می شود؟ به سمت چه می رود؟)
5) عشق و رابطه: (نگاه شهودی به الگوی عاطفی و رابطه ای این شخص. چه چالش ها یا الگوهای تکراری ای دارد؟ در چه وضعیتی از عشق است؟)
6) کارت تاروت شهودی: (یک کارت تاروت سمبلیک انتخاب کن و با توضیح شهودی و نمادین از معناش برایش تفسیر کن. کارت واقعی بزن مثل: The Star یا The Hermit یا The Moon...)
7) پیام نهایی: (یک جملهٔ طلایی، مخصوص همان فرد. نه کلیشه ای، نه تکراری. جمله ای که وقتی بخواند حس کند فقط برای او نوشته شده.)
لحن باید انسانی، دلی، شاعرانه و در عین حال عمیق باشد؛ مثل یک دوست یا راهنمای روحی، نه ربات.
از عبارت هایی مثل «طبق الگوریتم» یا «بر اساس محاسبه» استفاده نکن. انگار این متن از دل شهود آمده.
حالا لطفاً متن کامل را بنویس.',
                'published_at' => null,
                'questions' => [
                    [
                        'content' => 'نام کامل',
                        'type' => 'text',
                        'is_required' => true,
                    ],
                    [
                        'content' => 'تاریخ تولد (شمسی، دقیق)',
                        'type' => 'date',
                        'is_required' => true,
                    ],
                    [
                        'content' => 'جنسیت',
                        'type' => 'select',
                        'is_required' => true,
                        'options' => [
                            'مذکر',
                            'مونث',
                        ]
                    ],
                    [
                        'content' => 'وضعیت رابطه‌ای',
                        'type' => 'select',
                        'is_required' => true,
                        'options' => [
                            'مجرد',
                            'متأهل',
                            'در رابطه',
                            'جداشده',
                            'نامشخص',
                        ]
                    ],
                ],
            ],
        ];

        foreach ($items as $item) {
            $questions = $item['questions'];
            unset($item['questions']);

            $package = Package::create($item);

            foreach ($questions as $question) {
                $q = $package->questions()->create([
                    'content' => $question['content'],
                    'type' => $question['type'] ?? 'text',
                    'is_required' => $question['is_required'] ?? false,
                ]);

                if (($question['type'] ?? '') === 'select' && isset($question['options']) && is_array($question['options'])) {
                    foreach ($question['options'] as $opt) {
                        $q->options()->create([
                            'value' => $opt,
                        ]);
                    }
                }
            }
        }
    }
}
